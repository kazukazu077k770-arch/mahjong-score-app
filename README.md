# 🀄 麻雀スコア管理アプリケーション

シンプルで使いやすい麻雀のスコア管理Webアプリケーションです。

## 🚀 特徴

- **モバイル特化**: スマートフォンでの使用に最適化
- **リアルタイム統計**: ゲーム結果の自動統計計算・グラフ表示
- **データ永続化**: ブラウザリフレッシュに対応したデータ保存
- **役満祝儀対応**: 役満の祝儀計算機能
- **跳び・跳ばし機能**: 特殊ルールに対応
- **プレイヤー管理**: カスタマイズ可能なプレイヤー設定

## 📱 主な機能

### スコア入力
- 四麻・三麻対応
- 2×2グリッドのモバイル最適化UI
- 跳び・跳ばし設定
- 役満祝儀計算
- レート設定
- ウマ・オカ自動計算

### 統計表示
- 順位別勝率（1位率、2位率、3位率）
- 総合得点・確定値表示
- インタラクティブなグラフ（Plotly）
- プレイヤー別詳細分析

### データ管理
- JSON形式での自動保存
- ゲーム履歴記録
- 統計リセット機能
- CSVエクスポート

## 📁 プロジェクト構造

```
mahjong_app/
├── main.py                    # アプリケーションエントリーポイント
├── modules/                   # 機能モジュール
│   ├── data_init.py          # データ初期化
│   ├── data_storage.py       # データ永続化
│   └── score_utils.py        # スコア計算ユーティリティ
├── components/                # UIコンポーネント
│   └── styles.py             # CSS スタイル
├── pages/                     # ページコンポーネント
│   └── score_entry.py        # スコア入力画面
├── data/                      # データファイル（自動生成）
│   ├── mahjong_stats.json    # プレイヤー統計
│   ├── mahjong_history.json  # ゲーム履歴
│   └── app_settings.json     # アプリ設定
└── .streamlit/               # Streamlit設定
    └── config.toml
```

## 🛠 セットアップ

### 必要な環境
- Python 3.8+
- Streamlit 1.28.0+
- pandas 2.0.0+
- plotly 5.17.0+

### ローカル実行

```bash
# 依存関係のインストール
pip install -r requirements.txt

# アプリケーションの起動
streamlit run main.py
```

### Streamlit Community Cloudでのデプロイ

1. このリポジトリをGitHubにプッシュ
2. [Streamlit Community Cloud](https://share.streamlit.io/)にアクセス
3. GitHubアカウントでログイン
4. "New app"からこのリポジトリを選択
5. `main.py`を指定してデプロイ

## 🎮 使用方法

1. **プレイヤー設定**: ゲーム設定エキスパンダーでプレイヤーを選択
2. **点数入力**: 各プレイヤーの点数を入力
3. **特殊設定**: 跳び・跳ばし、役満祝儀を設定
4. **記録**: 合計点数が正しければ記録ボタンをクリック
5. **統計確認**: 統計タブでプレイヤーの成績を確認

## ⚙️ 設定

### レート設定
- 0.1〜10.0倍で設定可能
- 確定値計算に反映

### ウマ・オカ設定
- 四麻: 1位〜4位のウマを個別設定
- 三麻: 1位〜3位のウマを個別設定

### プレイヤー名編集
- 最大8名のプレイヤー名を編集可能
- 統計データは名前変更に自動対応

## 📊 統計機能

- **基本統計**: 総合得点、確定値、順位分布
- **順位率**: 1位率、2位率、3位率の個別表示
- **グラフ表示**: バーチャート、円グラフでの視覚化
- **個人分析**: プレイヤー別の詳細パフォーマンス

## 🔄 データ永続化

- ブラウザリフレッシュ対応
- 自動保存機能
- バックアップ機能付き
- エラー時の自動復旧
http://localhost:8501/?mobile=true
```

## 📱 機能

### 基本機能
- **プレイヤー管理**: 最大4人のプレイヤー名設定
- **スコア入力**: ゲーム結果の点数入力
- **自動計算**: 順位、得点差の自動計算
- **統計表示**: 総合成績、順位統計の表示

### 統計機能
- 総合勝ち得点
- 各順位の回数
- 平均順位
- 連対率（1位・2位の割合）
- 跳ばし・跳び回数

### データ管理
- CSV形式でのデータエクスポート
- データリセット機能
- セッション状態の自動保存

## 🎯 使用方法

1. **プレイヤー設定**: 「プレイヤー設定」セクションでプレイヤー名を設定
2. **スコア入力**: 各プレイヤーの最終点数を入力
3. **記録**: 「記録」ボタンで結果を保存
4. **統計確認**: 下部の統計テーブルで成績を確認

## 🔧 技術仕様

- **フレームワーク**: Streamlit
- **言語**: Python
- **スタイリング**: カスタムCSS
- **データ管理**: Streamlitセッション状態
- **モジュール設計**: 関心の分離を重視した設計

## 📋 今後の機能拡張

- [ ] 役満記録機能
- [ ] ゲーム履歴の詳細表示
- [ ] グラフによる統計表示
- [ ] データベース連携
- [ ] ユーザー認証機能

## 🤝 貢献

プルリクエストや機能提案を歓迎します。バグ報告や機能要望は、Issueでお知らせください。

## 📄 ライセンス

MIT License

---

🀄 **楽しい麻雀ライフをお過ごしください！**
